"use strict";var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if("value" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();function _possibleConstructorReturn(a,b){if(!a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b&&(typeof b==="object"||typeof b==="function")?b:a}function _inherits(b,a){if(typeof a!=="function"&&a!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:false,writable:true,configurable:true}});if(a){Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a}}function _toConsumableArray(a){if(Array.isArray(a)){for(var c=0,b=Array(a.length);c<a.length;c++){b[c]=a[c]}return b}else{return Array.from(a)}}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}window.addEventListener("load",function(){var j=document;var e={viewWidth:j.documentElement.clientWidth,viewHeight:j.documentElement.clientHeight,loadingImgArr:[],main:$("#fly-main"),header:$(".fly-header"),canvas:$("#fly-stage")[0],animationEnd:"onwebkitanimationend" in window?"webkitAnimationEnd":"animationend",transitionEnd:"onwebkittransitionend" in window?"webkitTransitionEnd":"transitionend"};var k={init:function m(){var v=this;v.setDefault();window.addEventListener("resize",function(){v.setDefault(j.documentElement.clientWidth);var aj=v.setSize(j.documentElement.clientHeight)});var t=v.setSize();var B=600;var ae=600;var ab=100;var o=50;var A="#e4dbdc";var G=4;var u=document.getElementById("fly-stage"),z=new createjs.Stage(u),P=new createjs.Container().set({x:(t.width-B)/2,y:(t.height-ae)/2});createjs.Touch.enable(z);z.enableMouseOver(10);z.mouseEnabled=true;z.mouseMoveOutside=true;var U=new createjs.Shape();U.graphics.beginFill(A).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,B,ab,o).endFill();var ag=new createjs.Shape().set({x:U.x-G/2,y:U.y-G/2});ag.dashCmd=ag.graphics.setStrokeDash([14,10]).command;ag.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,B+G,ab+G,o).endFill();var T=new createjs.Shape().set({x:B,y:0});T.graphics.beginFill(A).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,ae*1.2,ab,o).endFill();T.regX=B+140;T.regY=50;T.rotation=-45;var X=new createjs.Shape().set({x:T.x-G/2,y:T.y-G/2});X.dashCmd=X.graphics.setStrokeDash([14,10]).command;X.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,ae*1.2,ab+G,o).endFill();X.regX=T.regX;X.regY=T.regY;X.rotation=-45;var R=new createjs.Shape().set({x:ab/1.6,y:ae-ab*1.62});R.graphics.beginFill(A).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,B,ab,o).endFill();var S=new createjs.Shape().set({x:R.x-G/2,y:R.y-G/2});S.dashCmd=S.graphics.setStrokeDash([14,10]).command;S.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,B+G,ab+G,o).endFill();var Q=new createjs.Shape().set({y:2});Q.graphics.beginFill(A).moveTo(B-85,0).lineTo(B-175,ab-6).lineTo(B-32,ab-6).lineTo(B,ab/2).lineTo(B-40,0).endFill();var N=new createjs.Shape().set({y:2});N.graphics.beginFill(A).moveTo(120,R.y).lineTo(236,R.y-1).lineTo(140,R.y+ab-6).lineTo(120,R.y+ab-6).endFill();var M=new createjs.Shape().set({y:0});M.graphics.beginFill("#fff").drawRect(B-80,-1,20,3);var L=new createjs.Shape().set({y:2});L.graphics.beginFill("#fff").drawRoundRect(B-185,ab-6,20,3,1);var K=new createjs.Shape().set({y:2});K.graphics.beginFill("#fff").drawRoundRect(230,R.y-5,6,6,3);var H=new createjs.Shape().set({y:2});H.graphics.beginFill("#fff").drawRoundRect(120,R.y+ab-6,20,4,0);var D=new createjs.Shape();D.graphics.beginStroke("#bdb8b8").moveTo(B-73,3).lineTo(B-162,ab-6);var C=new createjs.Shape();C.graphics.beginStroke("#bdb8b8").moveTo(228,R.y+3).lineTo(136,R.y+ab-6);var aa=new createjs.Shape().set({x:0,y:35});aa.graphics.beginLinearGradientFill(["rgba(255,152,0,1)","rgba(200,191,107,.1)"],[0,1],0,0,0,200).drawRoundRect(0,0,B-ab,ab*1.1,45);var Z=new createjs.Shape().set({x:B+92,y:-50});Z.graphics.beginLinearGradientFill(["rgba(171,157,187,1)","rgba(156,169,194,.3)"],[0,1],0,0,0,740).drawRoundRect(0,0,B,ab*1.1,70);Z.regX=T.regX;Z.regY=T.regY;Z.rotation=-45;var Y=new createjs.Shape().set({x:R.x,y:ae-ab-50});Y.graphics.beginLinearGradientFill(["rgba(255,139,0,1)","rgba(255,139,0,.1)"],[0,1],0,0,0,170).drawRoundRect(0,0,B,ab*1.4,45);var y=new createjs.Bitmap("./static/images/c-center.png").set({x:180,y:120});y.scaleX=0.8;y.scaleY=0.8;this.cloudImg=y;var w=[aa,Z,Y,U,ag,R,S,T,X,Q,N,M,L,K,H,D,C,y],ah=[],F=[],x=[],V=["a","v","i","t","v1","z-ai","z-e","z-i","z-m","z-ps","z-t"];V=V.map(function(aj){return"./static/images/"+aj+".png"});w.forEach(function(aj){P.addChild(aj)});var q=function(){function am(an){_classCallCheck(this,am);var ao=[].concat(_toConsumableArray(an));this.sx=ao[0];this.sy=ao[1];this.height=ao[2];this.hitX=ao[3];this.hitY=ao[4];this.regX=ao[5];this.regY=ao[6];this.color=ao[7];this.index=ao[8];this.rotation=ao[9];this.draw()}_createClass(am,[{key:"draw",value:function aj(){var an=new createjs.Shape();this.shape=an;an.graphics.beginStroke(this.color||"#bab4b4").setStrokeStyle(1).moveTo(this.sx,this.sy).lineTo(this.sx,this.sy+this.height).endStroke();var ao=[this.regX,this.regY,this.rotation||0];an.regX=ao[0];an.regY=ao[1];an.rotation=ao[2];P.addChildAt(an,this.index||8)}},{key:"roll",value:function ak(){if(!this.shape){return}this.shape.x=this.shape.x+1;this.die()}},{key:"die",value:function al(){if(this.shape.x>=this.hitX){P.removeChild(this.shape);ah.shift();this.shape=null}}}]);return am}();var s=function(an){_inherits(am,an);function am(ao){var ap=arguments.length<=1||arguments[1]===undefined?1:arguments[1];_classCallCheck(this,am);var ar=_possibleConstructorReturn(this,Object.getPrototypeOf(am).call(this,ao));var aq=[].concat(_toConsumableArray(ao));ar.rotation=aq[0];ar.name=v.getGuid();ar.step=ap;return ar}_createClass(am,[{key:"roll",value:function aj(){if(!this.shape){return}this.shape.x=this.shape.x-this.step;this.shape.y=this.shape.y+this.step;this.die()}},{key:"delLine",value:function ak(){var ao=this;ah.forEach(function(ap,aq){ap.name===ao.name&&ah.splice(aq,1)})}},{key:"die",value:function al(){if(this.shape.y>=this.hitY){P.removeChild(this.shape);this.delLine();this.shape=null}}}]);return am}(q);var ac=function(){function ak(an){_classCallCheck(this,ak);var am=this;am.src=an.img;am.x=an.x;am.y=an.y;am.scale=an.scale;am.w=0;am.h=0;var ao=new Image();ao.onload=function(){am.w=this.width*(am.scale||1);am.h=this.height*(am.scale||1)};ao.src=am.src;this.image=ao;am.container=an.container||P;am.draw()}_createClass(ak,[{key:"draw",value:function aj(){}},{key:"roll",value:function al(){}}]);return ak}();var W=function(ak){_inherits(am,ak);function am(){var an=arguments.length<=0||arguments[0]===undefined?{x:0,y:0,scale:1}:arguments[0];_classCallCheck(this,am);return _possibleConstructorReturn(this,Object.getPrototypeOf(am).call(this,an))}_createClass(am,[{key:"draw",value:function aj(){var an=new createjs.Bitmap(this.src).set({x:this.x,y:this.y,scale:1});this.img=an;P.addChildAt(an,P.getChildIndex(y)-1)}},{key:"roll",value:function al(){if(!this.img){return}P.setChildIndex(this.img,P.getChildIndex(y)-1);if(this.img.x<=B-this.w&&!this.back){this.img.x+=0.5}else{this.back=true;this.img.x-=0.4;this.img.y+=0.4;if(this.img.y>160){P.removeChild(this.img);v.produce();this.img=null;this.image=null}}}}]);return am}(ac);var O=function(ap){_inherits(am,ap);function am(at){_classCallCheck(this,am);var aq=_possibleConstructorReturn(this,Object.getPrototypeOf(am).call(this,at));var ar=aq;var au=[v.r(120,180),v.r(-0.6,0.6),v.r(-0.6,0.6),true,0,false,v.getGuid(),0];ar.life=au[0];ar.speedX=au[1];ar.speedY=au[2];ar.start=au[3];ar.iNow=au[4];ar.canMove=au[5];ar.name=au[6];ar.angle=au[7];return aq}_createClass(am,[{key:"starting",value:function ak(){this.start=true}},{key:"stop",value:function an(){this.start=false}},{key:"draw",value:function aj(){var ar=this;var aq=new createjs.Bitmap(this.src).set({x:this.x,y:this.y,scaleX:this.scale,scaleY:this.scale});aq.cursor="pointer";this.img=aq;aq.on("mousedown",function(at){ar.stop();ar.canMove=true});aq.on("pressmove",function(au){if(ar.canMove){if(!ar.one&&aq.x+ar.w>P.x&&aq.x<P.x+ab&&aq.y+ar.h>P.y-20&&aq.y<P.y+ab){}var at=au.stageX-ar.w/2,av=au.stageY-ar.h/2;at<0&&(at=0);av<=0&&(av=0);at>e.viewWidth-ar.w/2&&(at=e.viewWidth-ar.w);av>e.viewHeight-ar.h/2&&(av=e.viewHeight-ar.h);ar.img.x=at;ar.img.y=av}});aq.on("rollover",function(at){ar.stop();aq.scaleX+=0.2;aq.scaleY+=0.2});aq.on("rollout",function(at){aq.scaleX-=0.2;aq.scaleY-=0.2;ar.starting();if(!ar.canMove){return}if(aq.x+ar.w>P.x&&aq.x<P.x+ab&&aq.y+ar.h>P.y-20&&aq.y<P.y+ab){F.push(new W({img:ar.src,x:0,y:(ab-ar.h)/2,scale:1}));ar.stop();ar.die(aq)}else{ar.canMove=false;ar.one=false}});z.addChild(aq)}},{key:"die",value:function ao(aq){x.forEach(function(ar,at){ar.name=aq.name&&x.splice(at,1)});z.removeChild(aq);this.img=null}},{key:"roll",value:function al(){var aq=this;if(!aq.img){return}if(aq.start){aq.img.x+=aq.speedX;aq.img.y+=aq.speedY;aq.img.x<=0&&(aq.speedX*=-1);aq.img.y<=0&&(aq.speedY*=-1);aq.img.y>=e.viewHeight-100&&(aq.speedY*=-1);aq.img.x>e.viewWidth-100&&(aq.speedX*=-1);aq.iNow++;if(aq.iNow>=aq.life){aq.life=v.r(aq.life,aq.life+150);aq.iNow=0;v.r(-1,1)>0&&(aq.speedX*=-1);v.r(-1,1)>0&&(aq.speedY*=-1)}}}}]);return am}(ac);z.addChild(P);var ai=0,E=P.x,J=e.viewHeight-100;for(var af=0;af<V.length;af++){if(af%2===1){ai=B+B;E=e.viewWidth-100}else{ai=0;E=P.x}x.push(new O({img:V[af],x:v.r(ai,E),y:v.r(0,J),scale:0.8}))}for(var af=10;af>=0;af--){ah.push(new q([o*(af+1),4,ab-8,B-85-o*(af+1)]));ah.push(new q([o*(af+1)+20,R.y+5,ab-8,B-58-o*(af+1)+20,4,"","","",P.getChildIndex(T)-1]))}for(var ad=0;ad<16;ad++){ah.push(new s([363-13*ad*4,374+12*ad/25,ab-4,0,R.y-34*ad,"","","",P.getChildIndex(y)-1,-45]))}createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.on("tick",p,this);var I=0,r=0;function p(aj){ag.dashCmd.offset+=1;X.dashCmd.offset+=1.47;S.dashCmd.offset+=1;F.forEach(function(ak){return ak.roll()});x.forEach(function(ak){return ak.roll()});ah.forEach(function(ak){return ak.roll()});I++;if(I%50===0){I=0;ah.push(new q([o,4,ab-8,B-85,4]));ah.push(new q([o+20,R.y+5,ab-8,B-65,4,"","","",P.getChildIndex(T)-1]))}r++;if(r%35===0){if(r===35){this.line=this.line||new s([363,376,ab-4,0,R.y,"","","",P.getChildIndex(y)-1,-45],1.03);ah.push(this.line)}else{r=70;ah.push(new s([363,376,ab-4,0,R.y,"","",null,P.getChildIndex(y)-1,-45]))}}z.update(aj)}},comDanger:function n(r,p){var o=this;r.show=r.show||123;if(r.show===123){var q;(function(){r.show=1;r.sourceRect=new createjs.Rectangle(0,0,125,192);r=r.clone();var t=[new createjs.BlurFilter(16,16,2)];var s=o.getFXBitmap(r,t,0,0,125,192);q=createjs.Tween.get(s,{loop:true}).to({alpha:1},2500).wait(1000).to({alpha:0},2500);q.on("change",function(){r.alpha=1-Math.pow(s.alpha,3)});p.addChild(r,s)})()}},getFXBitmap:function l(s,r,o,u,p,q){s.cache(o,u,p,q);var t=new createjs.Bitmap(s.cacheCanvas);t.filters=r;t.cache(0,0,p,q);t.regX=-o;t.regY=-u;t.x=s.x;t.y=s.y;t.alpha=0;s.uncache();return t},produce:function g(){createjs.MotionGuidePlugin.install(createjs.Tween);createjs.Tween.get(this.cloudImg,{loop:false},false).to({rotation:14},400).to({rotation:0},400).to({rotation:-7},200).to({rotation:0},200)},r:function a(p,o){return p+(o-p)*Math.random()},loginAction:function c(){},getGuid:function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){var p=Math.random()*16|0,o=q=="x"?p:p&3|8;return o.toString(16)})},sinLine:function d(){var x=arguments.length<=0||arguments[0]===undefined?{isBack:false}:arguments[0];var r=x.canvas,B=x.isBack;var q=r.getContext("2d"),p=r.width,z=r.height,s=Math,u=50,w=0,y=z*0.6,o=s.ceil(p/s.PI*4),v=B?-10:10;var A=setInterval(function(){w+=v;q.clearRect(0,0,p,z);q.beginPath();for(var t=0;t<o;t++){q.lineTo(s.PI*t/180*u,0.3*s.sin(s.PI*(t-w)/180)*u/2+y)}q.stroke();if(s.abs(w)>p){q.clearRect(0,0,r.width,r.height);q.beginPath();q.moveTo(0,y);q.lineTo(p,y);q.stroke();clearInterval(A)}},18)},setSize:function f(){var o=arguments.length<=0||arguments[0]===undefined?e.viewHeight:arguments[0];var p=arguments.length<=1||arguments[1]===undefined?e.viewWidth:arguments[1];e.main.height(o-e.header.height());e.canvas.width=p;e.canvas.height=o-e.header.height();return{width:p,height:o}},setDefault:function i(){var o=arguments.length<=0||arguments[0]===undefined?e.viewWidth:arguments[0];j.getElementsByTagName("html")[0].style.fontSize=o/10+"px"},addShadow:function b(o){o.addClass("shadow");setTimeout(function(){o.removeClass("shadow")},200)}};k.init()});