"use strict";var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if("value" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();function _possibleConstructorReturn(a,b){if(!a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b&&(typeof b==="object"||typeof b==="function")?b:a}function _inherits(b,a){if(typeof a!=="function"&&a!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:false,writable:true,configurable:true}});if(a){Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a}}function _toConsumableArray(a){if(Array.isArray(a)){for(var c=0,b=Array(a.length);c<a.length;c++){b[c]=a[c]}return b}else{return Array.from(a)}}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}window.addEventListener("load",function(){var d=document;var c={viewWidth:d.documentElement.clientWidth,viewHeight:d.documentElement.clientHeight,loadingImgArr:[],main:$("#fly-main"),header:$(".fly-header"),canvas:$("#fly-stage")[0],animationEnd:"onwebkitanimationend" in window?"webkitAnimationEnd":"animationend",transitionEnd:"onwebkittransitionend" in window?"webkitTransitionEnd":"transitionend"};var b={init:function f(){var o=this;o.setDefault();window.addEventListener("resize",function(){o.setDefault(d.documentElement.clientWidth);var T=o.setSize(d.documentElement.clientHeight)});var m=o.setSize();var t=600;var Q=600;var O=100;var h=50;var s="#e4dbdc";var w=4;var n=document.getElementById("fly-stage"),r=new createjs.Stage(n),D=new createjs.Container().set({x:(m.width-t)/2,y:(m.height-Q)/2});var I=new createjs.Shape();I.graphics.beginFill(s).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,t,O,h).endFill();var R=new createjs.Shape().set({x:I.x-w/2,y:I.y-w/2});R.dashCmd=R.graphics.setStrokeDash([14,10]).command;R.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,t+w,O+w,h).endFill();var H=new createjs.Shape().set({x:t,y:0});H.graphics.beginFill(s).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,Q*1.2,O,h).endFill();H.regX=t+140;H.regY=50;H.rotation=-45;var K=new createjs.Shape().set({x:H.x-w/2,y:H.y-w/2});K.dashCmd=K.graphics.setStrokeDash([14,10]).command;K.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,Q*1.2,O+w,h).endFill();K.regX=H.regX;K.regY=H.regY;K.rotation=-45;var F=new createjs.Shape().set({x:O/1.6,y:Q-O*1.62});F.graphics.beginFill(s).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,t,O,h).endFill();var G=new createjs.Shape().set({x:F.x-w/2,y:F.y-w/2});G.dashCmd=G.graphics.setStrokeDash([14,10]).command;G.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,t+w,O+w,h).endFill();var E=new createjs.Shape().set({y:2});E.graphics.beginFill(s).moveTo(t-85,0).lineTo(t-175,O-6).lineTo(t-32,O-6).lineTo(t,O/2).lineTo(t-40,0).endFill();var C=new createjs.Shape().set({y:2});C.graphics.beginFill(s).moveTo(120,F.y).lineTo(236,F.y-1).lineTo(140,F.y+O-6).lineTo(120,F.y+O-6).endFill();var B=new createjs.Shape().set({y:0});B.graphics.beginFill("#fff").drawRect(t-80,-1,20,3);var A=new createjs.Shape().set({y:2});A.graphics.beginFill("#fff").drawRoundRect(t-185,O-6,20,3,1);var z=new createjs.Shape().set({y:2});z.graphics.beginFill("#fff").drawRoundRect(230,F.y-5,6,6,3);var x=new createjs.Shape().set({y:2});x.graphics.beginFill("#fff").drawRoundRect(120,F.y+O-6,20,4,0);var v=new createjs.Shape();v.graphics.beginStroke("#bdb8b8").moveTo(t-73,3).lineTo(t-162,O-6);var u=new createjs.Shape();u.graphics.beginStroke("#bdb8b8").moveTo(228,F.y+3).lineTo(136,F.y+O-6);var N=new createjs.Shape().set({x:0,y:35});N.graphics.beginLinearGradientFill(["rgba(255,152,0,1)","rgba(200,191,107,.1)"],[0,1],0,0,0,200).drawRoundRect(0,0,t-O,O*1.1,45);var M=new createjs.Shape().set({x:t+92,y:-50});M.graphics.beginLinearGradientFill(["rgba(171,157,187,1)","rgba(156,169,194,.3)"],[0,1],0,0,0,740).drawRoundRect(0,0,t,O*1.1,70);M.regX=H.regX;M.regY=H.regY;M.rotation=-45;var L=new createjs.Shape().set({x:F.x,y:Q-O-50});L.graphics.beginLinearGradientFill(["rgba(255,139,0,1)","rgba(255,139,0,.1)"],[0,1],0,0,0,170).drawRoundRect(0,0,t,O*1.4,45);var q=new createjs.Bitmap("./static/images/c-center.png").set({x:180,y:120});q.scaleX=0.8;q.scaleY=0.8;var p=[N,M,L,I,R,F,G,H,K,E,C,B,A,z,x,v,u,q];var S=[];p.forEach(function(T){D.addChild(T)});var j=function(){function W(X){_classCallCheck(this,W);var Y=[].concat(_toConsumableArray(X));this.sx=Y[0];this.sy=Y[1];this.height=Y[2];this.hitX=Y[3];this.hitY=Y[4];this.regX=Y[5];this.regY=Y[6];this.color=Y[7];this.index=Y[8];this.rotation=Y[9];this.draw()}_createClass(W,[{key:"draw",value:function T(){var X=new createjs.Shape();this.shape=X;X.graphics.beginStroke(this.color||"#bab4b4").setStrokeStyle(1).moveTo(this.sx,this.sy).lineTo(this.sx,this.sy+this.height).endStroke();var Y=[this.regX,this.regY,this.rotation||0];X.regX=Y[0];X.regY=Y[1];X.rotation=Y[2];D.addChildAt(X,this.index||8)}},{key:"roll",value:function U(){this.shape.x=this.shape.x+1;this.die()}},{key:"die",value:function V(){if(this.shape.x>=this.hitX){D.removeChild(this.shape);S.shift()}}}]);return W}();var l=function(W){_inherits(V,W);function V(X){_classCallCheck(this,V);var Z=_possibleConstructorReturn(this,Object.getPrototypeOf(V).call(this,X));var Y=[].concat(_toConsumableArray(X));Z.rotation=Y[0];return Z}_createClass(V,[{key:"roll",value:function T(){this.shape.x=this.shape.x-1;this.shape.y=this.shape.y+1;this.die()}},{key:"die",value:function U(){if(this.shape.y>=this.hitY){D.removeChild(this.shape)}}}]);return V}(j);var P=function(){function U(){var X=arguments.length<=0||arguments[0]===undefined?{x:0,y:0}:arguments[0];_classCallCheck(this,U);var W=this;W.src=X.img;W.x=X.x;W.y=X.y;W.w=0;W.h=0;var Y=new Image();Y.onload=function(){W.w=this.width;W.h=this.height};Y.src=W.src;W.draw()}_createClass(U,[{key:"draw",value:function T(){var W=new createjs.Bitmap(this.src).set({x:this.x,y:this.y});this.img=W;D.addChildAt(W,D.getChildIndex(q)-1)}},{key:"roll",value:function V(){if(this.img.x<=t-this.w&&!this.back){this.img.x+=1}else{this.back=true;this.img.x-=0.4;this.img.y+=0.4;if(this.img.y>160){D.removeChild(this.img)}}}}]);return U}();r.addChild(D);var J=new P({img:"./static/images/i.png",x:0,y:5});createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.on("tick",i,this);var y=0,k=0;function i(T){J.roll();y++;if(y%50===0){y=0;S.push(new j([h,4,O-8,t-85,4]));S.push(new j([h+20,F.y+5,O-8,t-65,4,"","","",D.getChildIndex(H)-1]))}k++;if(k%35===0){k=0;S.push(new l([363,376,O-4,F.x,F.y,"","",null,D.getChildIndex(q)-1,-45]))}for(var U=0;U<S.length;U++){S[U].roll()}R.dashCmd.offset+=1;K.dashCmd.offset+=1.47;G.dashCmd.offset+=1;r.update(T)}},setSize:function e(){var h=arguments.length<=0||arguments[0]===undefined?c.viewHeight:arguments[0];var i=arguments.length<=1||arguments[1]===undefined?c.viewWidth:arguments[1];c.main.height(h-c.header.height());c.canvas.width=i;c.canvas.height=h-c.header.height();return{width:i,height:h}},setDefault:function a(){var h=arguments.length<=0||arguments[0]===undefined?c.viewWidth:arguments[0];d.getElementsByTagName("html")[0].style.fontSize=h/10+"px"},addShadow:function g(h){h.addClass("shadow");setTimeout(function(){h.removeClass("shadow")},200)}};b.init()});