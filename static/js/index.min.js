"use strict";var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if("value" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();function _possibleConstructorReturn(a,b){if(!a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b&&(typeof b==="object"||typeof b==="function")?b:a}function _inherits(b,a){if(typeof a!=="function"&&a!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:false,writable:true,configurable:true}});if(a){Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a}}function _toConsumableArray(a){if(Array.isArray(a)){for(var c=0,b=Array(a.length);c<a.length;c++){b[c]=a[c]}return b}else{return Array.from(a)}}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}window.addEventListener("load",function(){var h=document;var d={viewWidth:h.documentElement.clientWidth,viewHeight:h.documentElement.clientHeight,loadingImgArr:[],main:$("#fly-main"),header:$(".fly-header"),canvas:$("#fly-stage")[0],animationEnd:"onwebkitanimationend" in window?"webkitAnimationEnd":"animationend",transitionEnd:"onwebkittransitionend" in window?"webkitTransitionEnd":"transitionend"};var i={init:function j(){var r=this;r.setDefault();window.addEventListener("resize",function(){r.setDefault(h.documentElement.clientWidth);var W=r.setSize(h.documentElement.clientHeight)});var p=r.setSize();var w=600;var T=600;var R=100;var k=50;var v="#e4dbdc";var z=4;var q=document.getElementById("fly-stage"),u=new createjs.Stage(q),G=new createjs.Container().set({x:(p.width-w)/2,y:(p.height-T)/2});var L=new createjs.Shape();L.graphics.beginFill(v).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,w,R,k).endFill();var U=new createjs.Shape().set({x:L.x-z/2,y:L.y-z/2});U.dashCmd=U.graphics.setStrokeDash([14,10]).command;U.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,w+z,R+z,k).endFill();var K=new createjs.Shape().set({x:w,y:0});K.graphics.beginFill(v).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,T*1.2,R,k).endFill();K.regX=w+140;K.regY=50;K.rotation=-45;var N=new createjs.Shape().set({x:K.x-z/2,y:K.y-z/2});N.dashCmd=N.graphics.setStrokeDash([14,10]).command;N.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,T*1.2,R+z,k).endFill();N.regX=K.regX;N.regY=K.regY;N.rotation=-45;var I=new createjs.Shape().set({x:R/1.6,y:T-R*1.62});I.graphics.beginFill(v).setStrokeStyle(5).beginStroke("#fff").drawRoundRect(0,0,w,R,k).endFill();var J=new createjs.Shape().set({x:I.x-z/2,y:I.y-z/2});J.dashCmd=J.graphics.setStrokeDash([14,10]).command;J.graphics.setStrokeStyle(3).beginStroke("#aaaaaa").drawRoundRect(0,0,w+z,R+z,k).endFill();var H=new createjs.Shape().set({y:2});H.graphics.beginFill(v).moveTo(w-85,0).lineTo(w-175,R-6).lineTo(w-32,R-6).lineTo(w,R/2).lineTo(w-40,0).endFill();var F=new createjs.Shape().set({y:2});F.graphics.beginFill(v).moveTo(120,I.y).lineTo(236,I.y-1).lineTo(140,I.y+R-6).lineTo(120,I.y+R-6).endFill();var E=new createjs.Shape().set({y:0});E.graphics.beginFill("#fff").drawRect(w-80,-1,20,3);var D=new createjs.Shape().set({y:2});D.graphics.beginFill("#fff").drawRoundRect(w-185,R-6,20,3,1);var C=new createjs.Shape().set({y:2});C.graphics.beginFill("#fff").drawRoundRect(230,I.y-5,6,6,3);var A=new createjs.Shape().set({y:2});A.graphics.beginFill("#fff").drawRoundRect(120,I.y+R-6,20,4,0);var y=new createjs.Shape();y.graphics.beginStroke("#bdb8b8").moveTo(w-73,3).lineTo(w-162,R-6);var x=new createjs.Shape();x.graphics.beginStroke("#bdb8b8").moveTo(228,I.y+3).lineTo(136,I.y+R-6);var Q=new createjs.Shape().set({x:0,y:35});Q.graphics.beginLinearGradientFill(["rgba(255,152,0,1)","rgba(200,191,107,.1)"],[0,1],0,0,0,200).drawRoundRect(0,0,w-R,R*1.1,45);var P=new createjs.Shape().set({x:w+92,y:-50});P.graphics.beginLinearGradientFill(["rgba(171,157,187,1)","rgba(156,169,194,.3)"],[0,1],0,0,0,740).drawRoundRect(0,0,w,R*1.1,70);P.regX=K.regX;P.regY=K.regY;P.rotation=-45;var O=new createjs.Shape().set({x:I.x,y:T-R-50});O.graphics.beginLinearGradientFill(["rgba(255,139,0,1)","rgba(255,139,0,.1)"],[0,1],0,0,0,170).drawRoundRect(0,0,w,R*1.4,45);var t=new createjs.Bitmap("./static/images/c-center.png").set({x:180,y:120});t.scaleX=0.8;t.scaleY=0.8;this.cloudImg=t;var s=[Q,P,O,L,U,I,J,K,N,H,F,E,D,C,A,y,x,t];var V=[];s.forEach(function(W){G.addChild(W)});var m=function(){function Z(aa){_classCallCheck(this,Z);var ab=[].concat(_toConsumableArray(aa));this.sx=ab[0];this.sy=ab[1];this.height=ab[2];this.hitX=ab[3];this.hitY=ab[4];this.regX=ab[5];this.regY=ab[6];this.color=ab[7];this.index=ab[8];this.rotation=ab[9];this.draw()}_createClass(Z,[{key:"draw",value:function W(){var aa=new createjs.Shape();this.shape=aa;aa.graphics.beginStroke(this.color||"#bab4b4").setStrokeStyle(1).moveTo(this.sx,this.sy).lineTo(this.sx,this.sy+this.height).endStroke();var ab=[this.regX,this.regY,this.rotation||0];aa.regX=ab[0];aa.regY=ab[1];aa.rotation=ab[2];G.addChildAt(aa,this.index||8)}},{key:"roll",value:function X(){if(!this.shape){return}this.shape.x=this.shape.x+1;this.die()}},{key:"die",value:function Y(){if(this.shape.x>=this.hitX){G.removeChild(this.shape);V.shift();this.shape=null}}}]);return Z}();var o=function(Z){_inherits(Y,Z);function Y(aa){_classCallCheck(this,Y);var ac=_possibleConstructorReturn(this,Object.getPrototypeOf(Y).call(this,aa));var ab=[].concat(_toConsumableArray(aa));ac.rotation=ab[0];return ac}_createClass(Y,[{key:"roll",value:function W(){if(!this.shape){return}this.shape.x=this.shape.x-1;this.shape.y=this.shape.y+1;this.die()}},{key:"die",value:function X(){if(this.shape.y>=this.hitY){G.removeChild(this.shape);this.shape=null}}}]);return Y}(m);var S=function(){function X(){var aa=arguments.length<=0||arguments[0]===undefined?{x:0,y:0}:arguments[0];_classCallCheck(this,X);var Z=this;Z.src=aa.img;Z.x=aa.x;Z.y=aa.y;Z.w=0;Z.h=0;var ab=new Image();ab.onload=function(){Z.w=this.width;Z.h=this.height};ab.src=Z.src;this.image=ab;Z.draw()}_createClass(X,[{key:"draw",value:function W(){var Z=new createjs.Bitmap(this.src).set({x:this.x,y:this.y});this.img=Z;G.addChildAt(Z,G.getChildIndex(t)-1)}},{key:"roll",value:function Y(){if(!this.img){return}G.setChildIndex(this.img,G.getChildIndex(t)-1);if(this.img.x<=w-this.w&&!this.back){this.img.x+=1}else{this.back=true;this.img.x-=0.4;this.img.y+=0.4;if(this.img.y>160){G.removeChild(this.img);r.produce();this.img=null;this.image=null}}}}]);return X}();u.addChild(G);var M=new S({img:"./static/images/i.png",x:0,y:5});createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.on("tick",l,this);var B=0,n=0;function l(W){U.dashCmd.offset+=1;N.dashCmd.offset+=1.47;J.dashCmd.offset+=1;M.roll();B++;if(B%50===0){B=0;V.push(new m([k,4,R-8,w-85,4]));V.push(new m([k+20,I.y+5,R-8,w-65,4,"","","",G.getChildIndex(K)-1]))}n++;if(n%35===0){n=0;V.push(new o([363,376,R-4,I.x,I.y,"","",null,G.getChildIndex(t)-1,-45]))}for(var X=0;X<V.length;X++){V[X].roll()}u.update(W)}},produce:function f(){createjs.MotionGuidePlugin.install(createjs.Tween);createjs.Tween.get(this.cloudImg,{loop:false},false).to({rotation:14},400).to({rotation:0},400).to({rotation:-7},200).to({rotation:0},200)},loginAction:function b(){},sinLine:function c(){var v=arguments.length<=0||arguments[0]===undefined?{isBack:false}:arguments[0];var p=v.canvas,z=v.isBack;var o=p.getContext("2d"),n=p.width,x=p.height,q=Math,r=50,u=0,w=x*0.6,l=q.ceil(n/q.PI*4),s=z?-10:10;var y=setInterval(function(){u+=s;o.clearRect(0,0,n,x);o.beginPath();for(var k=0;k<l;k++){o.lineTo(q.PI*k/180*r,0.3*q.sin(q.PI*(k-u)/180)*r/2+w)}o.stroke();if(q.abs(u)>n){o.clearRect(0,0,p.width,p.height);o.beginPath();o.moveTo(0,w);o.lineTo(n,w);o.stroke();clearInterval(y)}},18)},setSize:function e(){var k=arguments.length<=0||arguments[0]===undefined?d.viewHeight:arguments[0];var l=arguments.length<=1||arguments[1]===undefined?d.viewWidth:arguments[1];d.main.height(k-d.header.height());d.canvas.width=l;d.canvas.height=k-d.header.height();return{width:l,height:k}},setDefault:function g(){var k=arguments.length<=0||arguments[0]===undefined?d.viewWidth:arguments[0];h.getElementsByTagName("html")[0].style.fontSize=k/10+"px"},addShadow:function a(k){k.addClass("shadow");setTimeout(function(){k.removeClass("shadow")},200)}};i.init()});